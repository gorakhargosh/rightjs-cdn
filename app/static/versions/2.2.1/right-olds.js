/**
 * This is old browsers support patch for RightJS
 *
 * The library released under terms of the MIT license
 * Visit http://rightjs.org for more details
 *
 * Copyright (C) 2008-2010 Nikolay V. Nemshilov
 */
if(RightJS.Browser.OLD&&RightJS.Browser.IE)$=RightJS.$=function(b){return function(f){var e=b(f);if(e&&e instanceof RightJS.Element&&RightJS.isString(f)&&e._.id!==f)e=RightJS.$(document).first("#"+f);return e}}(RightJS.$);function event_support_for(b,f){var e=document.createElement(f);e.setAttribute(b,";");return isFunction(e[b])}
if(!event_support_for("onsubmit","form")){var submit_boobler=function(b){var f=$(b),e=f.target._,o=e.type;e=e.form;var m;if(e&&(m=$(e).parent())&&(b.keyCode===13&&(o==="text"||o==="password")||b.type==="click"&&(o==="submit"||o==="image"))){f.type="submit";f.target=$(e);m.fire(f)}};document.attachEvent("onclick",submit_boobler);document.attachEvent("onkeypress",submit_boobler)}
if(!event_support_for("onchange","input")){var get_input_value=function(b){var f=b._,e=f.type;return e==="radio"||e==="checkbox"?f.checked:b.getValue()},change_boobler=function(b,f){var e=f.parent(),o=get_input_value(f);if(e&&""+f._prev_value!==""+o){f._prev_value=o;b.type="change";e.fire(b)}},catch_inputs_access=function(b){b=$(b);var f=b.target,e=f._.type,o=f._.tagName,m=e==="radio"||e==="checkbox";if(b.type==="click"&&(m||o==="SELECT")||b.type==="keydown"&&(b.keyCode==13&&o!=="TEXTAREA"||e==="select-multiple"))change_boobler(b,
f)},catch_input_left=function(b){b=$(b);var f=b.target;f instanceof Input&&change_boobler(b,f)};document.attachEvent("onclick",catch_inputs_access);document.attachEvent("onkeydown",catch_inputs_access);document.attachEvent("onfocusout",catch_input_left);document.attachEvent("onbeforeactivate",function(b){b=$(b).target;if(b instanceof Input)b._prev_value=get_input_value(b)})}
RightJS.$E("p").getBoundingClientRect||RightJS.Element.include({position:function(){var b=this._,f=b.offsetTop,e=b.offsetLeft;for(b=b.offsetParent;b;){f+=b.offsetTop;e+=b.offsetLeft;b=b.offsetParent}return{x:e,y:f}}});
(function(b){var f=!!document.querySelector,e=!f;if(b.Browser.IE8L)e=true;if(e){var o={" ":function(a,c){return b.$A(a.getElementsByTagName(c))},">":function(a,c){for(var d=[],h=a.firstChild;h;){if(c==="*"||h.tagName===c)d.push(h);h=h.nextSibling}return d},"+":function(a,c){for(;a=a.nextSibling;)if(a.tagName)return c==="*"||a.tagName===c?[a]:[];return[]},"~":function(a,c){for(var d=[];a=a.nextSibling;)if(c==="*"||a.tagName===c)d.push(a);return d}},m={not:function(a,c){return a.nodeType===1&&!b.$(a).match(c)},
checked:function(a){return a.checked===true},enabled:function(a){return a.disabled===false},disabled:function(a){return a.disabled===true},selected:function(a){return a.selected===true},empty:function(a){return!a.firstChild},"first-child":function(a,c){for(;a=a.previousSibling;)if(a.nodeType===1&&(c===null||a.nodeName===c))return false;return true},"first-of-type":function(a){return m["first-child"](a,a.nodeName)},"last-child":function(a,c){for(;a=a.nextSibling;)if(a.nodeType===1&&(c===null||a.nodeName===
c))return false;return true},"last-of-type":function(a){return m["last-child"](a,a.nodeName)},"only-child":function(a,c){return m["first-child"](a,c)&&m["last-child"](a,c)},"only-of-type":function(a){return m["only-child"](a,a.nodeName)},"nth-child":function(a,c,d,h){var k=1,i=c[0];for(c=c[1];a=h===true?a.nextSibling:a.previousSibling;)if(a.nodeType===1&&(d===undefined||a.nodeName===d))k++;return c===undefined?k===i:(k-c)%i===0&&(k-c)/i>=0},"nth-of-type":function(a,c){return m["nth-child"](a,c,a.nodeName)},
"nth-last-child":function(a,c){return m["nth-child"](a,c,undefined,true)},"nth-last-of-type":function(a,c){return m["nth-child"](a,c,a.nodeName,true)}},C=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,H=/#([\w\-_]+)/,I=/^[\w\*]+/,J=/\.([\w\-\._]+)/,K=/:([\w\-]+)(\((.+?)\))*$/,L=/\[((?:[\w\-]*:)?[\w\-]+)\s*(?:([!\^$*~|]?=)\s*((['"])([^\4]*?)\4|([^'"][^\]]*?)))?\]/,x={},O=function(a){if(!x[a]){for(var c,d,h,k,i,j,g,n={},l=a;d=
l.match(L);){i=i||{};i[d[1]]={o:d[2]||"",v:d[5]||d[6]||""};l=l.replace(d[0],"")}if(d=l.match(K)){j=d[1];g=d[3]===""?null:d[3];if(j.startsWith("nth")){g=g.toLowerCase();if(g==="n")g=j=null;else{if(g==="odd")g="2n+1";if(g==="even")g="2n";var p=/^([+\-]?\d*)?n([+\-]?\d*)?$/.exec(g);g=p?[p[1]==="-"?-1:parseInt(p[1],10)||1,parseInt(p[2],10)||0]:[parseInt(g,10),undefined]}}l=l.replace(d[0],"")}c=(l.match(H)||[1,null])[1];d=(l.match(I)||"*").toString().toUpperCase();h=(l.match(J)||[1,""])[1].split(".").without("");
k=h.length;n.tag=d;if(c||h.length||i||j){c=c||false;i=i||false;j=j in m?m[j]:false;h=k?h:false;n.filter=function(s){for(var u,D=[],y=0,M=0,N=s.length,w;y<N;y++){u=s[y];if(!(c!==false&&u.id!==c)){if(h!==false){var q=u.className.split(" "),t=q.length,r=0;for(w=false;r<k;r++){for(var z=0,E=false;z<t;z++)if(h[r]===q[z]){E=true;break}if(!E){w=true;break}}if(w)continue}if(i!==false){var v;w=false;for(v in i){q=v==="class"?u.className:u.getAttribute(v)||"";t=i[v].o;r=i[v].v;if(t===""&&(v==="class"||v===
"lang"?q==="":u.getAttributeNode(v)===null)||t==="="&&q!==r||t==="*="&&q.indexOf(r)===-1||t==="^="&&q.indexOf(r)!==0||t==="$="&&q.substring(q.length-r.length)!==r||t==="~="&&q.split(" ").indexOf(r)===-1||t==="|="&&q.split("-").indexOf(r)===-1){w=true;break}}if(w)continue}if(j!==false)if(!j(u,g))continue;D[M++]=u}}return D}}x[a]=n}return x[a]},A={},F=function(a){var c=a.join("");if(!A[c]){for(var d=0;d<a.length;d++)a[d][1]=O(a[d][1]);var h=b.$uid,k=function(j){for(var g=[],n=[],l,p=0,s=j.length;p<
s;p++){l=h(j[p]);if(!n[l]){g.push(j[p]);n[l]=true}}return g},i=function(j,g){var n=o[g[0]](j,g[1].tag);return g[1].filter?g[1].filter(n):n};A[c]=function(j){for(var g,n,l=0,p=a.length;l<p;l++)if(l===0)g=i(j,a[l]);else{if(l>1)g=k(g);for(var s=0;s<g.length;s++){n=i(g[s],a[l]);n.unshift(1);n.unshift(s);g.splice.apply(g,n);s+=n.length-3}}return a.length>1?k(g):g}}return A[c]},B={},G=function(a,c){var d;if(!B[c]){C.lastIndex=0;d=[];for(var h=[],k=" ",i,j;i=C.exec(c);){j=i[1];if(j==="+"||j===">"||j==="~")k=
j;else{h.push([k,j]);k=" "}if(i[2]){d.push(F(h));h=[]}}d.push(F(h));B[c]=d}d=B[c];h=[];k=0;for(i=d.length;k<i;k++)h=h.concat(d[k](a));return h};e={first:function(a){return this.find(a)[0]},find:function(a,c){var d,h=a||"*",k=this._;if(f)try{d=$A(k.querySelectorAll(h))}catch(i){d=G(k,h)}else d=G(k,h);return c===true?d:d.map(b.$)}};b.$ext(b.Element.prototype,e);b.$ext(b.Document.prototype,e)}})(RightJS);
